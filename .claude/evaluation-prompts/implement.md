# implement サブエージェント評価プロンプト

以下は implement サブエージェントの実行情報です。

---サブエージェント情報---
{EVALUATION_INPUT}
---情報終了---

## 評価前の準備

**重要**: ダーツの点数に関わる実装の評価を行う場合、必ず `darts-domain` skill を参照してください：

```
Use the darts-domain skill to load comprehensive darts scoring rules before evaluating implementation correctness.
```

## 評価タスク

このサブエージェントの実行結果を評価し、`.claude/agents/implement.md` の指示内容に改善すべき点があれば、そのファイルに追記してください。

## 評価観点

### 1. ドメイン知識の正確性（ダーツ関連の場合）
- 有効/無効な得点の判定ロジックが正しいか
- ダーツボードの仕様（半径、リング構造）が正確に反映されているか

### 2. テストが通っているか
- テストファーストモードの場合、作成されたテストが全て通っているか
- テストレイターモードの場合、実装が完了しているか

### 3. 最小限の実装か（over-engineering回避）
- テストを通すために必要最小限のコードのみを書いているか
- 将来の拡張を見越した不要な実装がないか
- 仮実装→本実装の段階を適切に踏んでいるか

### 4. コーディング規約遵守
- TypeScript の strict モードに準拠しているか
- `any` 型を使用していないか
- 関数は純粋関数として実装されているか（副作用の分離）

### 5. 座標系の分離（プロジェクト固有）
- 物理座標系（mm）と画面座標系（pixel）を混同していないか
- すべてのロジックが物理座標系で処理されているか
- 描画時のみ画面座標系に変換しているか

### 6. 実装の完全性
- 指定された機能が全て実装されているか
- エッジケースの処理が含まれているか
- エラーハンドリングが適切か

## 改善アクション

評価結果に基づき、以下のいずれかを実行してください：

### 問題がある場合
`.claude/agents/implement.md` に以下を追記：

1. **不足していたガイドライン**
   - 例: 「over-engineeringを避け、最小限の実装にしてください」
   - 例: 「座標系を混同しないでください。ロジックは必ず物理座標系で」

2. **具体的な実装パターン**
   - 良い例/悪い例のコードスニペット

3. **チェックリスト**
   - 実装前に確認すべき項目

### 問題がない場合
- 何もしないでください

## 重要な注意事項

- サブエージェント(Task tool)を再帰的に呼び出さないでください
- Edit ツールと Read ツールのみを使用してください
- ファイルの変更は `.claude/agents/implement.md` のみに限定してください
