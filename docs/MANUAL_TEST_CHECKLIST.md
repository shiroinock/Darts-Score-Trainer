# 手動テストチェックリスト

このドキュメントは、Darts Score Trainerの手動動作確認を行う際のチェックリストです。
各項目は「条件 → 期待結果」の形式で記載されています。

---

## 1. 基礎練習モード（1投・得点・独立）

### 1.1 設定画面
- [ ] プリセット「基礎練習」を選択 → 設定サマリーに「1投単位」「得点を問う」「独立判定」と表示される
- [ ] 難易度スライダーを変更 → 標準偏差(mm)の値が連動して変化する
- [ ] 「練習開始」ボタンをクリック → 練習画面に遷移する

### 1.2 練習画面（表示）
- [ ] ダーツボード上に1本のダーツマーカーが表示される
- [ ] 問題文に「この投擲の得点は？」と表示される
- [ ] StatsBarに正解数/総問題数、正答率、連続正解数が表示される
- [ ] 残り点数は表示されない（得点モードのため）

### 1.3 練習画面（回答）
- [ ] NumPadで数字を入力 → 入力欄に数字が表示される
- [ ] 「確定」ボタンをクリック → フィードバックが表示される
- [ ] 正解の場合 → ✓アイコンと「正解！」が表示され、連続正解数が増加する
- [ ] 不正解の場合 → ✗アイコンと正解の得点が表示され、連続正解数が0にリセットされる
- [ ] 「次へ」ボタンをクリック → 新しい問題が生成され、ダーツマーカーの位置が変わる

### 1.4 得点計算の正確性
- [ ] ダーツがINNER_BULLに刺さっている → 正解は50点
- [ ] ダーツがOUTER_BULLに刺さっている → 正解は25点
- [ ] ダーツがTRIPLEリングに刺さっている → 正解はセグメント番号×3
- [ ] ダーツがDOUBLEリングに刺さっている → 正解はセグメント番号×2
- [ ] ダーツがSINGLEエリアに刺さっている → 正解はセグメント番号×1
- [ ] ダーツがボード外に刺さっている → 正解は0点

---

## 2. プレイヤー練習モード（3投・残り点数・累積）

### 2.1 設定画面
- [ ] プリセット「プレイヤー練習」を選択 → 設定サマリーに「3投単位」「残り点数を問う」「累積判定」「開始点数: 501」と表示される

### 2.2 練習画面（表示）
- [ ] ダーツボード上に3本のダーツマーカーが表示される（1本目から順に追加）
- [ ] 各ダーツマーカーに番号（1, 2, 3）が表示される
- [ ] 凡例が表示され、各ダーツの色と番号の対応が分かる
- [ ] 問題文に「残り点数は？」と表示される
- [ ] StatsBarに現在の残り点数が表示される

### 2.3 練習画面（残り点数の計算）
- [ ] 開始点数501から3投の合計得点を引いた値が正解となる
- [ ] 例: 開始501点、3投合計60点 → 正解は441点
- [ ] 回答後、残り点数が更新される（StatsBarの表示が変わる）

### 2.4 バスト判定との連携
- [ ] 残り点数を超える得点を取った場合 → バスト表示がされる
- [ ] バスト時 → 残り点数はラウンド開始時の値に戻る

---

## 3. コーラー基礎モード（3投・得点・独立）

### 3.1 設定画面
- [ ] プリセット「コーラー基礎」を選択 → 設定サマリーに「3投単位」「得点を問う」「独立判定」と表示される

### 3.2 練習画面（表示）
- [ ] ダーツボード上に3本のダーツマーカーが表示される
- [ ] 問題文に「3投の合計得点は？」と表示される

### 3.3 練習画面（回答）
- [ ] 3投の合計得点（0〜180）を回答する
- [ ] 例: T20(60) + T20(60) + T20(60) → 正解は180点
- [ ] 例: 20(20) + 1(1) + 5(5) → 正解は26点

---

## 4. コーラー累積モード（3投・得点・累積）

### 4.1 設定画面
- [ ] プリセット「コーラー累積」を選択 → 設定サマリーに「3投単位」「得点を問う」「累積判定」と表示される

### 4.2 練習画面
- [ ] 3投の合計得点を回答する（コーラー基礎と同様）
- [ ] 内部的には残り点数が管理されているが、問われるのは得点のみ

---

## 5. 総合練習モード（3投・両方・累積）

### 5.1 設定画面
- [ ] プリセット「総合練習」を選択 → 設定サマリーに「3投単位」「両方を問う」「累積判定」「開始点数: 501」と表示される

### 5.2 練習画面
- [ ] 問題によって「3投の合計得点は？」または「残り点数は？」がランダムに表示される
- [ ] 得点モードの問題 → 3投の合計を回答
- [ ] 残り点数モードの問題 → 現在の残り点数から3投を引いた値を回答
- [ ] 残り点数が0以下になる可能性がある場合 → 得点モードが優先される

---

## 6. セッション設定：問題数モード

- [ ] 問題数「10問」を選択して練習開始 → 10問回答後に自動で結果画面に遷移する
- [ ] 問題数「20問」を選択して練習開始 → 20問回答後に自動で結果画面に遷移する
- [ ] 問題数「50問」を選択して練習開始 → 50問回答後に自動で結果画面に遷移する
- [ ] 問題数「100問」を選択して練習開始 → 100問回答後に自動で結果画面に遷移する
- [ ] 途中で「終了」ボタンをクリック → 即座に結果画面に遷移する

---

## 7. セッション設定：時間制限モード

- [ ] 時間制限「3分」を選択して練習開始 → 3分経過後に自動で結果画面に遷移する
- [ ] 時間制限「5分」を選択して練習開始 → 5分経過後に自動で結果画面に遷移する
- [ ] 時間制限「10分」を選択して練習開始 → 10分経過後に自動で結果画面に遷移する
- [ ] StatsBarに残り時間が表示される
- [ ] 残り時間が減少していく（1秒ごとに更新）
- [ ] 途中で「終了」ボタンをクリック → 即座に結果画面に遷移する

---

## 8. バスト処理

### 8.1 バスト条件（残り点数モードのみ）
- [ ] 残り点数を超える得点を取った場合 → バスト（例: 残り40点で60点を取得）
- [ ] 残り1点になった場合 → バスト（ダブルアウトルールで上がれない）
- [ ] 残り点数ちょうどをシングルで取った場合 → バスト（ダブルで上がる必要がある）

### 8.2 バスト時の挙動
- [ ] フィードバックに「⚠️ バスト！」と理由が表示される
- [ ] バスト理由「over」 → 「残り点数を超えています」と表示される
- [ ] バスト理由「finish_impossible」 → 「残り1点では上がれません」と表示される
- [ ] バスト理由「double_out_required」 → 「ダブルで上がる必要があります」と表示される
- [ ] 残り点数がラウンド開始時の値に戻る
- [ ] 次の問題へ進む

---

## 9. ダブルアウト（正常終了）

- [ ] 残り点数がダブルで上がれる値（2, 4, 6, ...40, D-BULL=50）のとき
- [ ] ダブルリングに刺さって残り0点になった場合 → ゲームクリア
- [ ] 例: 残り32点でD16に刺さった → ゲームクリア
- [ ] 例: 残り50点でINNER_BULLに刺さった → ゲームクリア

---

## 10. ゲームクリア（0点到達）

- [ ] 残り点数が0になった場合 → 結果画面に遷移する
- [ ] 結果画面に「ゲームクリア」または終了理由が表示される
- [ ] 統計情報（正解数、正答率、連続正解記録）が表示される

---

## 11. 入力バリデーション

### 11.1 NumPad入力
- [ ] 数字ボタン（0-9）をクリック → 入力欄に数字が追加される
- [ ] 「C」ボタンをクリック → 入力欄がクリアされる
- [ ] 「⌫」ボタンをクリック → 最後の1桁が削除される
- [ ] 空の状態で「確定」ボタン → ボタンが無効化されている（クリックできない）
- [ ] 0のみ入力して「確定」 → 0点として回答が送信される
- [ ] 181以上の値を入力して「確定」 → 回答が送信される（バリデーションはサーバー側）

### 11.2 入力範囲
- [ ] 得点モード: 0〜180の範囲が有効な回答（1投: 0〜60、3投: 0〜180）
- [ ] 残り点数モード: 0〜開始点数の範囲が有効な回答

---

## 12. キーボード操作

- [ ] 数字キー（0-9）を押す → 入力欄に数字が追加される
- [ ] Backspaceキーを押す → 最後の1桁が削除される
- [ ] Escapeキーを押す → 入力欄がクリアされる
- [ ] Enterキーを押す → 回答が確定される（入力がある場合）
- [ ] Enterキーを押す（入力が空の場合） → 何も起こらない
- [ ] フィードバック表示中にEnterキーを押す → 次の問題へ進む

---

## 13. localStorage保存/復元

### 13.1 設定の保存
- [ ] 難易度（stdDevMM）を変更 → ブラウザを閉じて再度開く → 変更した値が保持されている
- [ ] プリセットを変更 → ブラウザを閉じて再度開く → 変更したプリセットが保持されている
- [ ] ターゲット設定を変更 → ブラウザを閉じて再度開く → 変更したターゲットが保持されている

### 13.2 保存されない項目
- [ ] ゲーム中の状態（残り点数、現在の問題など） → ブラウザを閉じると初期化される
- [ ] 統計情報（正解数、連続正解記録） → ブラウザを閉じると初期化される
- [ ] セッション設定（問題数/時間制限） → ブラウザを閉じるとデフォルト値に戻る

### 13.3 データ破損への耐性
- [ ] localStorageに不正なJSONが保存されている場合 → デフォルト設定で起動する（エラーにならない）
- [ ] localStorageが空の場合 → デフォルト設定で起動する

---

## 14. 結果画面

- [ ] 総問題数が正しく表示される
- [ ] 正解数が正しく表示される
- [ ] 正答率（%）が正しく計算されている
- [ ] 連続正解記録（ベストストリーク）が正しく表示される
- [ ] 経過時間が正しく表示される
- [ ] 「同じ設定で再挑戦」ボタン → 同じ設定で練習画面に遷移する
- [ ] 「設定を変更」ボタン → 設定画面に遷移する

---

## 15. 画面遷移

- [ ] 設定画面 → 「練習開始」 → 練習画面
- [ ] 練習画面 → 「設定に戻る」 → 設定画面（確認ダイアログなし）
- [ ] 練習画面 → 「終了」 → 結果画面
- [ ] 練習画面 → 問題数達成/時間切れ → 結果画面（自動遷移）
- [ ] 練習画面 → ゲームクリア → 結果画面（自動遷移）
- [ ] 結果画面 → 「同じ設定で再挑戦」 → 練習画面
- [ ] 結果画面 → 「設定を変更」 → 設定画面

---

## 16. レスポンシブ表示

### 16.1 デスクトップ（1025px以上）
- [ ] ダーツボードと入力エリアが横並びで表示される
- [ ] ダーツボードが大きく表示される

### 16.2 タブレット（641px〜1024px）
- [ ] ダーツボードと入力エリアが横並びまたは縦並びで表示される
- [ ] タッチ操作でNumPadが使いやすいサイズ

### 16.3 スマートフォン（〜640px）
- [ ] ダーツボードと入力エリアが縦並びで表示される
- [ ] NumPadボタンがタッチしやすいサイズ
- [ ] スクロールなしで全要素が表示される（ビューポート内に収まる）

---

## テスト実施記録

| 日付 | 実施者 | 対象セクション | 結果 | 備考 |
|------|--------|---------------|------|------|
| | | | | |
